"use strict";!function(o){if(o.cookie("cookiesid")&&o.cookie("cookienum")){var n=o.cookie("cookiesid").split(","),c=o.cookie("cookienum").split(",");o.each(n,function(i,t){!function(c,e){o.ajax({url:"http://10.31.158.43/dongfanggouwu/dongfanggouwu/php/dongfanggouwu.php",dataType:"json"}).done(function(i){var t=i.piclist1;console.log(t),o.each(t,function(i,t){if(c==t.id){var n=o(".listcart:hidden").clone(!0,!0);n.find(".pic").find("img").attr("src",t.pic),n.find(".detail").find("a").html(t.title),n.find("#price_1").html(t.price),n.find(".pic").find("img").attr("sid",t.id),n.find(".buy_num").val(e),n.find("#total_1").html((t.price*e).toFixed(2)),n.css("display","block"),o(".left_block_list").append(n)}})})}(n[i],c[i])})}function t(){var n=0,c=0;o(".listcart:visible").each(function(i,t){o(t).find(".input_normal").prop("checked")&&(n+=parseInt(o(t).find(".buy_num").val()),c+=parseFloat(o(t).find("#total_1").html()))}),o("#itemsCount").html(n),o(".shangpin").find("em").eq(1).html(c.toFixed(2))}o.cookie("cookiesid")&&o.cookie("cookienum")?(o(".pv_cart_empty").hide(),o("pv_cart_balance").show()):(o(".pv_cart_empty").show(),o(".pv_cart_balance").hide()),o(".checkqx").on("change",function(){o(".listcart:visible").find(":checkbox").prop("checked",o(this).prop("checked")),o(".checkqx").prop("checked",o(this).prop("checked")),t()});var i=o(".listcart:visible").find(":checkbox");function e(i){return(parseFloat(i.parents(".listcart").find("#price_1").html())*parseInt(i.parents(".listcart").find(".buy_num").val())).toFixed(2)}o(".left_block_list").on("change",i,function(){o(".listcart:visible").find("input:checkbox").length==o(".listcart:visible").find("input:checked").size()?o(".checkqx").prop("checked",!0):o(".checkqx").prop("checked",!1),t()}),o(".pluss").on("click",function(){var i=o(this).parents(".listcart").find(".buy_num").val();999<=++i&&(i=999),o(this).parents(".listcart").find(".buy_num").val(i),o(this).parents(".listcart").find("#total_1").html(e(o(this))),t(),l(o(this))}),o(".cuts").on("click",function(){var i=o(this).parents(".listcart").find(".buy_num").val();--i<=1&&(i=1),o(this).parents(".listcart").find(".buy_num").val(i),o(this).parents(".listcart").find("#total_1").html(e(o(this))),t(),l(o(this))}),o(".buy_num").on("input",function(){var i=parseInt(o(this).val());/^\d+$/g.test(i)?999<=i?o(this).val(999):i<=0?o(this).val(1):o(this).val(i):o(this).val(1),o(this).parents(".listcart").find("#total_1").html(e(o(this))),t(),l(o(this))});var a=[],s=[];function l(i){o.cookie("cookiesid")&&o.cookie("cookienum")&&(a=o.cookie("cookiesid").split(","),s=o.cookie("cookienum").split(","));var t=i.parents(".listcart").find("img").attr("sid");s[o.inArray(t,a)]=i.parents(".listcart").find(".buy_num").val(),o.cookie("cookienum",s.toString(),7)}}(jQuery);